<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Z1N Protocol – Live Stats (Field Lens)</title>
<meta name="description" content="Live stats of the Z1N Field: intent mix across epochs (ΩC/ΩI/ΩK/ΩS), latest minted Key, canon anchors, artefacts, and the most attested signal per lens." />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
<meta name="robots" content="noindex,follow" />
<meta name="referrer" content="strict-origin-when-cross-origin" />
<link rel="canonical" href="https://www.z1nprotocol.xyz/live-stats.html" />

<meta property="og:type" content="article" />
<meta property="og:site_name" content="Z1N Protocol" />
<meta property="og:title" content="Z1N Protocol – Live Stats" />
<meta property="og:description" content="Signal-first live lens of the Field: intent mix, latest Key, canon anchors, artefacts, and most attested signal." />
<meta property="og:url" content="https://www.z1nprotocol.xyz/live-stats.html" />
<meta property="og:image" content="https://www.z1nprotocol.xyz/og-image.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="Z1N Protocol – Live Stats" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@Z1N_AI" />
<meta name="twitter:title" content="Z1N Protocol – Live Stats" />
<meta name="twitter:description" content="Signal-first live lens: intent mix, latest Key, canon anchors, artefacts." />
<meta name="twitter:image" content="https://www.z1nprotocol.xyz/og-image.png" />

<script type="application/ld+json">
[{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "@id": "https://www.z1nprotocol.xyz/live-stats.html#webpage",
  "url": "https://www.z1nprotocol.xyz/live-stats.html",
  "name": "Z1N Protocol – Live Stats",
  "description": "Live field stats: intent distribution across epoch lenses, latest Key, canon anchors, artefacts, and most attested signal.",
  "isPartOf": { "@id": "https://www.z1nprotocol.xyz/#website" },
  "inLanguage": "en"
},
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "@id": "https://www.z1nprotocol.xyz/#org",
  "name": "Z1N Protocol",
  "url": "https://www.z1nprotocol.xyz/",
  "sameAs": [
    "https://x.com/Z1N_AI",
    "https://github.com/z1nprotocol",
    "https://discord.gg/FBkCGfFEcV"
  ]
},
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Z1N Protocol", "item": "https://www.z1nprotocol.xyz/" },
    { "@type": "ListItem", "position": 2, "name": "Live Stats", "item": "https://www.z1nprotocol.xyz/live-stats.html" }
  ]
}]
</script>

<style>
:root {
  --bg:#050812; --card-bg:#020617; --text-main:#ffffff; --text-soft:#8f9ab5;
  --accent:#5ee8a0; --accent-soft:#3ab876; --card-border:rgba(148,163,184,0.25);
  --sunbeam:#ffd556; --mint:#5ee8a0; --aether:#7bb8fc; --rose:#f87171;
  --C:#5ee8a0; --I:#f87171; --K:#ffd556; --S:#7bb8fc;
}
*{box-sizing:border-box;margin:0;padding:0;}
html{scrollbar-gutter:stable;overflow-y:scroll;scroll-behavior:smooth;}
body{background:var(--bg);color:var(--text-main);font-family:system-ui,-apple-system,"Segoe UI",sans-serif;}
a{color:inherit;text-decoration:none;} a:hover{opacity:0.9;}

/* HEADER */
header{height:72px;display:flex;align-items:center;justify-content:center;border-bottom:1px solid rgba(255,255,255,0.05);margin-bottom:20px;position:relative;}
.nav-inner{width:100%;max-width:1200px;padding:0 24px;display:flex;align-items:center;justify-content:space-between;}
.logo-wrap{display:flex;align-items:center;gap:8px;}
.logo-link{display:inline-flex;align-items:center;gap:8px;}
.logo-dot{width:24px;height:24px;border-radius:999px;border:1px solid rgba(255,255,255,0.35);display:flex;align-items:center;justify-content:center;font-size:14px;line-height:1;}
.logo-text{font-size:11px;letter-spacing:0.18em;text-transform:uppercase;display:flex;gap:6px;}
.logo-main{opacity:1;font-weight:600;} .logo-sub{opacity:0.6;font-weight:400;}
.nav-links{display:flex;gap:22px;font-size:13px;opacity:0.85;}
.nav-links a{position:relative;} .nav-links a.active{color:var(--accent);}
.nav-links a.active::after{content:"";position:absolute;left:0;bottom:-4px;width:100%;height:2px;border-radius:999px;background:linear-gradient(to right,var(--accent),var(--accent-soft));}
.hamburger{display:none;background:rgba(15,23,42,0.8);border:1px solid rgba(148,163,184,0.25);border-radius:8px;cursor:pointer;padding:8px;flex-direction:column;gap:5px;}
.hamburger span{display:block;width:20px;height:1.5px;background:var(--text-main);border-radius:2px;transition:transform 0.3s,opacity 0.3s;}
.hamburger.open span:nth-child(1){transform:translateY(6.5px) rotate(45deg);}
.hamburger.open span:nth-child(2){opacity:0;}
.hamburger.open span:nth-child(3){transform:translateY(-6.5px) rotate(-45deg);}
@media(max-width:900px){
  .nav-inner{padding:0 16px;}
  .hamburger{display:flex;}
  .nav-links{
    display:none;position:absolute;top:72px;left:0;right:0;
    background:rgba(10,15,26,0.98);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);
    border-bottom:1px solid rgba(148,163,184,0.2);box-shadow:0 12px 32px rgba(0,0,0,0.6);
    flex-direction:column;padding:16px 24px 20px;gap:14px;font-size:14px;z-index:100;
  }
  .nav-links.open{display:flex;}
}

/* PAGE */
.page{max-width:1200px;margin:0 auto;padding:40px 24px 32px;}
@media(max-width:900px){.page{padding:32px 18px 28px;}}
h1{font-size:40px;margin:0 0 10px 0;letter-spacing:-0.02em;}
.lead{font-size:17px;opacity:0.85;line-height:1.65;margin-bottom:8px;max-width:920px;}
.lead-small{font-size:14px;opacity:0.7;line-height:1.65;margin-top:4px;margin-bottom:38px;max-width:920px;}

/* LATEST KEY BAR */
.latest-wrap{width:100%;margin:10px 0 18px;}
.latest-frame{position:relative;width:100%;overflow:hidden;border-top:1px solid rgba(148,163,184,0.12);border-bottom:1px solid rgba(148,163,184,0.12);padding:18px 16px;--mx:50%;--my:50%;}
.latest-spot{pointer-events:none;position:absolute;inset:-45%;background:radial-gradient(220px 110px at var(--mx) var(--my),rgba(94,232,160,0.22),rgba(94,232,160,0.08) 38%,rgba(94,232,160,0) 70%);opacity:0;transition:opacity 160ms ease;}
.latest-frame:hover .latest-spot{opacity:1;}
.latest-row{display:flex;align-items:center;justify-content:center;}
.latest-left{text-align:center;width:100%;}
.latest-headline{font-size:13px;margin-bottom:8px;}
.latest-headline .ep-label{color:var(--text-soft);font-weight:700;}
.latest-headline .ep-value{color:var(--text-soft);font-weight:700;}
.latest-headline .hl-sep{color:var(--text-soft);opacity:0.4;}
.latest-headline .hl-title{color:var(--text-soft);font-weight:700;text-transform:uppercase;letter-spacing:0.12em;font-size:11px;}
.latest-key{font-size:18px;font-weight:700;letter-spacing:-0.01em;margin-bottom:4px;}
.latest-glyphs{font-size:20px;letter-spacing:0.04em;margin-top:4px;margin-bottom:4px;font-weight:700;color:#ffffff;}
.latest-glyphs .dot{color:rgba(148,163,184,0.55);padding:0 5px;}

/* INTENT LEGEND */
.intent-legend{width:100%;display:flex;flex-direction:column;align-items:center;gap:6px;margin:6px 0 14px;user-select:none;}
.intent-legend .title{font-size:13px;color:var(--text-soft);opacity:0.95;}
.intent-legend .row{display:flex;gap:18px;align-items:center;justify-content:center;font-size:14px;letter-spacing:0.02em;font-weight:700;}
@media(max-width:600px){.intent-legend .row{display:grid;grid-template-columns:1fr 1fr;gap:6px 14px;font-size:12px;justify-items:center;}}
.intent-legend .c{color:var(--C);} .intent-legend .i{color:var(--I);} .intent-legend .k{color:var(--K);} .intent-legend .s{color:var(--S);}

/* ═══ DESKTOP ONLY ═══ */
.donut-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;margin-bottom:18px;}
.donut-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:18px;padding:14px 14px 16px;position:relative;overflow:hidden;cursor:pointer;transition:transform 220ms ease,box-shadow 220ms ease,border-color 220ms ease;}
.donut-card::before{content:"";position:absolute;inset:-1px;pointer-events:none;border-radius:18px;background:radial-gradient(circle at top,rgba(94,232,160,0.10),rgba(2,6,23,0) 62%);opacity:0.85;}
.donut-card>*{position:relative;}
.donut-top{display:flex;align-items:baseline;justify-content:space-between;gap:10px;margin-bottom:10px;}
.donut-top .label{font-size:11px;letter-spacing:0.16em;text-transform:uppercase;color:rgba(255,255,255,0.75);opacity:0.9;font-weight:700;}
.donut-top .sub{font-size:12px;color:var(--text-soft);white-space:nowrap;}
.donut-mid{display:flex;align-items:center;justify-content:center;padding:4px 0 2px;}
.donut-svg{width:150px;height:150px;display:block;}
.donut-card:hover{transform:translateY(-2px);border-color:rgba(94,232,160,0.45);box-shadow:0 6px 18px rgba(0,0,0,0.35),0 0 0 1px rgba(94,232,160,0.14),0 0 18px rgba(94,232,160,0.10);}
.donut-card.active{border-color:rgba(94,232,160,0.85);box-shadow:0 10px 28px rgba(0,0,0,0.45),0 0 0 1px rgba(94,232,160,0.22),0 0 28px rgba(94,232,160,0.18);transform:translateY(-1px);}

.desktop-below{margin-top:10px;}
.field-cards{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;width:100%;}
.field-card{background:var(--card-bg);border-radius:16px;border:1px solid var(--card-border);padding:14px 14px 16px;font-size:13px;transition:border-color 220ms ease,box-shadow 220ms ease,transform 220ms ease,background-color 220ms ease;position:relative;overflow:hidden;}
.field-card::before{content:"";position:absolute;inset:-1px;pointer-events:none;border-radius:16px;background:radial-gradient(circle at top,rgba(94,232,160,0.08),rgba(2,6,23,0) 62%);opacity:0.9;}
.field-card>*{position:relative;}
.fc-label{font-size:11px;letter-spacing:0.16em;text-transform:uppercase;color:var(--text-soft);font-weight:700;margin-bottom:6px;height:18px;display:flex;align-items:flex-end;justify-content:center;}
.fc-value{font-size:22px;font-weight:700;margin-bottom:4px;height:32px;line-height:32px;text-align:center;}
.fc-sub{font-size:12px;color:var(--text-soft);line-height:1.55;text-align:center;}
.field-card:hover{transform:translateY(-2px);border-color:rgba(94,232,160,0.35);box-shadow:0 6px 18px rgba(0,0,0,0.30),0 0 18px rgba(94,232,160,0.10);background-color:rgba(2,6,23,0.92);}

.field-signal{margin-top:18px;background:var(--card-bg);border-radius:18px;border:1px solid var(--card-border);padding:14px 14px 16px;overflow:visible;position:relative;}
.field-signal::before{content:"";position:absolute;inset:-1px;pointer-events:none;border-radius:18px;background:radial-gradient(circle at top,rgba(94,232,160,0.10),rgba(2,6,23,0) 65%);opacity:0.9;}
.field-signal>*{position:relative;}
.fs-top{display:flex;flex-direction:column;align-items:center;gap:8px;margin-bottom:10px;}
.fs-headline{font-size:13px;margin-bottom:2px;}
.fs-headline .ep-label{color:var(--text-soft);font-weight:700;}
.fs-headline .ep-value{color:var(--text-soft);font-weight:700;}
.fs-headline .hl-sep{color:var(--text-soft);opacity:0.4;}
.fs-headline .hl-title{color:var(--text-soft);font-weight:600;font-size:13px;letter-spacing:0.02em;}
.fs-body{font-size:13px;line-height:1.65;opacity:0.92;max-width:980px;white-space:pre-wrap;word-break:break-word;text-align:center;margin:0 auto;}
.epoch-tooltip{position:fixed;display:none;background:rgba(5,8,18,0.97);border:1px solid var(--accent);border-radius:10px;padding:10px 14px;font-size:12px;color:var(--text-soft);max-width:280px;line-height:1.5;box-shadow:0 8px 32px rgba(0,0,0,0.5);z-index:1000;pointer-events:none;}

/* ═══ MOBILE CAROUSEL ═══ */
.mob-wrap{display:none;}
@media(max-width:900px){
  .donut-grid,.desktop-below{display:none !important;}
  .mob-wrap{display:block;margin-top:4px;}
  .intent-legend{display:none;}
}
.mob-controls{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;}
.mob-dots{display:flex;gap:10px;}
.mob-dot{width:14px;height:14px;border-radius:999px;border:1.5px solid rgba(148,163,184,0.6);background:transparent;cursor:pointer;transition:background 0.2s,transform 0.2s,border-color 0.2s;padding:0;}
.mob-dot:hover{border-color:var(--accent);transform:scale(1.1);}
.mob-dot.active{background:radial-gradient(circle at 30% 30%,var(--accent),var(--accent-soft));border-color:var(--accent-soft);transform:scale(1.12);}
.mob-arrows{display:flex;gap:8px;}
.mob-arrow{width:32px;height:32px;border-radius:999px;border:1px solid rgba(148,163,184,0.3);background:rgba(255,255,255,0.03);cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--text-soft);font-size:16px;transition:border-color 0.2s,color 0.2s;}
.mob-arrow:hover{border-color:var(--accent);color:var(--accent);}
.mob-arrow:disabled{opacity:0.25;cursor:default;}

.mob-carousel{position:relative;overflow:hidden;border-radius:18px;border:1px solid var(--card-border);background:radial-gradient(circle at top,rgba(94,232,160,0.06),transparent 60%);touch-action:pan-y;}
.mob-track{display:flex;transition:transform 0.4s ease;will-change:transform;}
.mob-slide{flex:0 0 100%;min-width:100%;padding:22px 20px 24px;}

.ms-title{font-size:11px;letter-spacing:0.16em;text-transform:uppercase;color:rgba(255,255,255,0.75);font-weight:700;text-align:center;margin-bottom:4px;}
.ms-sub{font-size:12px;color:var(--text-soft);text-align:center;margin-bottom:14px;}
.ms-donut{display:flex;justify-content:center;margin-bottom:18px;}
.ms-donut .donut-svg{width:160px;height:160px;}
.ms-stats{display:flex;justify-content:center;gap:28px;margin-bottom:18px;}
.ms-stat{text-align:center;}
.ms-stat-label{font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:var(--text-soft);font-weight:700;margin-bottom:2px;}
.ms-stat-value{font-size:20px;font-weight:700;}
.ms-divider{width:40px;height:1px;background:rgba(148,163,184,0.2);margin:0 auto 14px;}
.ms-signal-label{font-size:11px;letter-spacing:0.12em;text-transform:uppercase;color:var(--text-soft);font-weight:600;text-align:center;margin-bottom:6px;}
.ms-signal-epoch{font-size:12px;color:var(--text-soft);text-align:center;margin-bottom:6px;}
.ms-signal-body{font-size:13px;line-height:1.6;opacity:0.92;text-align:center;white-space:pre-wrap;word-break:break-word;}

/* Mobile stat tooltip */
.ms-stat-label{position:relative;cursor:help;}
.ms-stat-tip{display:none;position:absolute;bottom:calc(100% + 8px);left:50%;transform:translateX(-50%);background:rgba(5,8,18,0.97);border:1px solid var(--accent);border-radius:8px;padding:6px 10px;font-size:11px;font-weight:400;letter-spacing:0;text-transform:none;color:var(--text-soft);white-space:nowrap;z-index:10;pointer-events:none;box-shadow:0 4px 16px rgba(0,0,0,0.5);}
.ms-stat-label.show-tip .ms-stat-tip{display:block;}

/* Mobile intent legend inside card */
.ms-legend{display:flex;justify-content:center;gap:10px;font-size:11px;font-weight:700;margin-bottom:14px;flex-wrap:wrap;}
.ms-legend .c{color:var(--C);} .ms-legend .i{color:var(--I);} .ms-legend .k{color:var(--K);} .ms-legend .s{color:var(--S);}

/* FOOTER */
footer{border-top:1px solid rgba(255,255,255,0.05);padding:32px 24px calc(40px + env(safe-area-inset-bottom, 0px));font-size:12px;text-align:center;opacity:0.85;margin-top:64px;max-width:1200px;margin-left:auto;margin-right:auto;}
footer .tagline{margin-bottom:14px;font-size:13px;}
footer .links a{color:var(--text-soft);transition:color 180ms ease;}
footer .links a:hover{color:var(--text-main);}
footer .links{display:flex;justify-content:center;gap:18px;font-size:13px;}
.footer-contracts{margin-top:14px;padding-top:14px;border-top:1px solid rgba(255,255,255,0.05);display:flex;flex-direction:column;align-items:center;}
.contracts-title{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.12em;color:var(--text-soft);margin-bottom:8px;opacity:0.7;}
.contracts-grid{display:flex;flex-direction:column;gap:3px;}
.contract-item{font-size:10px;text-align:center;}
.contract-label{opacity:0.5;text-transform:uppercase;letter-spacing:0.05em;}
.contract-addr{font-family:"SF Mono",Menlo,Monaco,Consolas,monospace;font-size:10px;word-break:break-all;transition:color 0.2s;color:var(--text-soft);}
.contract-addr:hover{color:var(--text-main);text-decoration:underline;}
.contract-sep{color:var(--text-soft);opacity:0.3;margin:0 4px;}
@media(max-width:600px){.contract-addr{font-size:9px;}}

@keyframes shimmer{0%{opacity:0.4;}50%{opacity:0.8;}100%{opacity:0.4;}}
.loading{animation:shimmer 1.5s ease-in-out infinite;}
@media(prefers-reduced-motion:reduce){*{scroll-behavior:auto!important;}.donut-card,.field-card{transition:none;}.latest-spot{transition:none;}.loading{animation:none;opacity:0.5;}}
</style>
</head>

<body>
<header>
  <div class="nav-inner">
    <div class="logo-wrap">
      <a href="index.html" class="logo-link" aria-label="Z1N Protocol home">
        <div class="logo-dot">Ω</div>
        <div class="logo-text"><span class="logo-main">Z1N</span><span class="logo-sub">PROTOCOL</span></div>
      </a>
    </div>
    <button class="hamburger" id="hamburger" type="button" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
    <nav class="nav-links" id="navLinks">
      <a href="about.html">About</a>
      <a href="how-it-works.html">How it Works</a>
      <a href="live-stats.html" class="active">Live Stats</a>
      <a href="artefacts.html">Artefacts</a>
      <a href="nbi-artefacts.html">4 NBIs</a>
      <a href="mint-key.html">Mint your Key</a>
      <a href="your-keys.html">Your Keys</a>
    </nav>
  </div>
</header>

<main class="page">
  <h1>Live Stats of the Field</h1>
  <p class="lead">Read the Field through signals and intents. View the number of awakened Keys, their relational Artefacts, and Canon Anchor mints.</p>
  <p class="lead-small">Hover to preview. Click to lock a lens. On mobile: swipe to shift.</p>

  <!-- Latest Key -->
  <section class="latest-wrap" aria-label="Latest minted Key">
    <div class="latest-frame" id="latestFrame">
      <div class="latest-spot" aria-hidden="true"></div>
      <div class="latest-row">
        <div class="latest-left">
          <div class="latest-headline" id="epochBadge"><span class="ep-label">Epoch </span><span class="ep-value">–</span><span class="hl-sep">  —  </span><span class="hl-title">Latest minted Key</span></div>
          <div class="latest-key" id="latestKey">Z1N #–</div>
          <div class="latest-glyphs" id="latestGlyphs" aria-label="Latest glyph line">–</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Intent legend -->
  <div class="intent-legend" aria-label="Intent legend">
    <div class="title">Intent mix across epochs</div>
    <div class="row">
      <span class="c">ΩC Collective</span>
      <span class="i">ΩI Individual</span>
      <span class="k">ΩK Co-creative</span>
      <span class="s">ΩS Silence</span>
    </div>
  </div>

  <!-- DESKTOP: 3 donut cards -->
  <section class="donut-grid" aria-label="Intent mix donuts">
    <article class="donut-card" data-key="21" data-window="Last 21 epochs" data-sub="recent activity" data-c="25" data-i="25" data-k="25" data-s="25"></article>
    <article class="donut-card" data-key="210" data-window="Last 210 epochs" data-sub="structural view" data-c="25" data-i="25" data-k="25" data-s="25"></article>
    <article class="donut-card" data-key="total" data-window="Total" data-sub="field memory" data-c="25" data-i="25" data-k="25" data-s="25"></article>
  </section>

  <!-- DESKTOP: field cards + signal -->
  <div class="desktop-below">
    <section class="field-cards" aria-label="Field cards">
      <div class="field-card"><div class="fc-label">Keys Awakened</div><div class="fc-value loading" id="vKeys">–</div><div class="fc-sub">Soulbound identities minted.</div></div>
      <div class="field-card"><div class="fc-label">Canon Anchors</div><div class="fc-value loading" id="vCanon">–</div><div class="fc-sub">Epochs marked as meaningful.</div></div>
      <div class="field-card"><div class="fc-label">Artefacts</div><div class="fc-value loading" id="vArtefacts">–</div><div class="fc-sub">Living mirrors of presence.</div></div>
    </section>
    <div class="epoch-tooltip" id="epochTooltip">The most attested signal is always from 2 epochs prior — attestation requires one full epoch window.</div>
    <section class="field-signal" aria-label="Most Attested Field Signal">
      <div class="fs-top"><div class="fs-headline" id="fsEpoch" style="cursor:help;"><span class="ep-label">Epoch </span><span class="ep-value">–</span><span class="hl-sep">  —  </span><span class="hl-title">Most Attested Field Signal</span></div></div>
      <div class="fs-body" id="fsBody">Loading...</div>
    </section>
  </div>

  <!-- MOBILE: full-lens carousel -->
  <div class="mob-wrap" id="mobWrap">
    <div class="mob-controls">
      <div class="mob-dots" id="mobDots"></div>
      <div class="mob-arrows">
        <button class="mob-arrow" id="mobPrev" type="button" aria-label="Previous">‹</button>
        <button class="mob-arrow" id="mobNext" type="button" aria-label="Next">›</button>
      </div>
    </div>
    <section class="mob-carousel" id="mobCarousel" aria-label="Mobile lens carousel">
      <div class="mob-track" id="mobTrack">
        <article class="mob-slide" data-lens="21">
          <div class="ms-title">Last 21 epochs</div>
          <div class="ms-sub">recent activity</div>
          <div class="ms-legend"><span class="c">ΩC Collective</span><span class="i">ΩI Individual</span><span class="k">ΩK Co-creative</span><span class="s">ΩS Silence</span></div>
          <div class="ms-donut" id="mobDonut21"></div>
          <div class="ms-stats">
            <div class="ms-stat"><div class="ms-stat-label" data-tip="Soulbound identities minted.">Keys Awakened</div><div class="ms-stat-value" id="mobKeys21">–</div></div>
            <div class="ms-stat"><div class="ms-stat-label" data-tip="Epochs marked as meaningful.">Canon Anchors</div><div class="ms-stat-value" id="mobCanon21">–</div></div>
            <div class="ms-stat"><div class="ms-stat-label" data-tip="Living mirrors of presence.">Artefacts</div><div class="ms-stat-value" id="mobArt21">–</div></div>
          </div>
          <div class="ms-divider"></div>
          <div class="ms-signal-label">Most Attested Signal</div>
          <div class="ms-signal-epoch" id="mobSigEp21">–</div>
          <div class="ms-signal-body" id="mobSigBody21">Loading...</div>
        </article>
        <article class="mob-slide" data-lens="210">
          <div class="ms-title">Last 210 epochs</div>
          <div class="ms-sub">structural view</div>
          <div class="ms-legend"><span class="c">ΩC Collective</span><span class="i">ΩI Individual</span><span class="k">ΩK Co-creative</span><span class="s">ΩS Silence</span></div>
          <div class="ms-donut" id="mobDonut210"></div>
          <div class="ms-stats">
            <div class="ms-stat"><div class="ms-stat-label" data-tip="Soulbound identities minted.">Keys Awakened</div><div class="ms-stat-value" id="mobKeys210">–</div></div>
            <div class="ms-stat"><div class="ms-stat-label" data-tip="Epochs marked as meaningful.">Canon Anchors</div><div class="ms-stat-value" id="mobCanon210">–</div></div>
            <div class="ms-stat"><div class="ms-stat-label" data-tip="Living mirrors of presence.">Artefacts</div><div class="ms-stat-value" id="mobArt210">–</div></div>
          </div>
          <div class="ms-divider"></div>
          <div class="ms-signal-label">Most Attested Signal</div>
          <div class="ms-signal-epoch" id="mobSigEp210">–</div>
          <div class="ms-signal-body" id="mobSigBody210">Loading...</div>
        </article>
        <article class="mob-slide" data-lens="total">
          <div class="ms-title">Total</div>
          <div class="ms-sub">field memory</div>
          <div class="ms-legend"><span class="c">ΩC Collective</span><span class="i">ΩI Individual</span><span class="k">ΩK Co-creative</span><span class="s">ΩS Silence</span></div>
          <div class="ms-donut" id="mobDonutTotal"></div>
          <div class="ms-stats">
            <div class="ms-stat"><div class="ms-stat-label" data-tip="Soulbound identities minted.">Keys Awakened</div><div class="ms-stat-value" id="mobKeysTotal">–</div></div>
            <div class="ms-stat"><div class="ms-stat-label" data-tip="Epochs marked as meaningful.">Canon Anchors</div><div class="ms-stat-value" id="mobCanonTotal">–</div></div>
            <div class="ms-stat"><div class="ms-stat-label" data-tip="Living mirrors of presence.">Artefacts</div><div class="ms-stat-value" id="mobArtTotal">–</div></div>
          </div>
          <div class="ms-divider"></div>
          <div class="ms-signal-label">Most Attested Signal</div>
          <div class="ms-signal-epoch" id="mobSigEpTotal">–</div>
          <div class="ms-signal-body" id="mobSigBodyTotal">Loading...</div>
        </article>
      </div>
    </section>
  </div>
</main>

<footer>
  <div class="tagline">Your presence is real · The Field remembers</div>
  <div class="links">
    <a href="https://github.com/z1nprotocol" target="_blank" rel="noreferrer">GitHub</a>
    <a href="https://x.com/Z1N_AI" target="_blank" rel="noreferrer">X</a>
    <a href="https://discord.gg/FBkCGfFEcV" target="_blank" rel="noreferrer">Discord</a>
  </div>
  <div class="footer-contracts">
    <div class="contracts-title">Verified Contracts · Polygon Mainnet</div>
    <div class="contracts-grid">
      <div class="contract-item"><span class="contract-label">Core</span> <span class="contract-sep">–</span> <a class="contract-addr" href="https://polygonscan.com/address/0x4Ef6f1a53B7aE03F8eDEAB3EcD069692D1548e13" target="_blank" rel="noreferrer">0x4Ef6f1a53B7aE03F8eDEAB3EcD069692D1548e13</a></div>
      <div class="contract-item"><span class="contract-label">Key</span> <span class="contract-sep">–</span> <a class="contract-addr" href="https://polygonscan.com/address/0xe27C2De6e8F1090EEAe18E1Ce3f51F1D2FeAf469" target="_blank" rel="noreferrer">0xe27C2De6e8F1090EEAe18E1Ce3f51F1D2FeAf469</a></div>
      <div class="contract-item"><span class="contract-label">Signal</span> <span class="contract-sep">–</span> <a class="contract-addr" href="https://polygonscan.com/address/0x3CD0DF7b0aC8fdF4dB1c65149741dB12F144e3bd" target="_blank" rel="noreferrer">0x3CD0DF7b0aC8fdF4dB1c65149741dB12F144e3bd</a></div>
      <div class="contract-item"><span class="contract-label">Issuance</span> <span class="contract-sep">–</span> <a class="contract-addr" href="https://polygonscan.com/address/0x6765B339dd0cdb1ca8c101C97073dd5Fd3Cf97dF" target="_blank" rel="noreferrer">0x6765B339dd0cdb1ca8c101C97073dd5Fd3Cf97dF</a></div>
    </div>
  </div>
</footer>

<script>
(function(){
  "use strict";

  var API_BASE = "https://z1n-backend-production.up.railway.app/api";
  var FALLBACK_API = "http://localhost:3001/api";
  var COLORS = {C:"#5ee8a0",I:"#f87171",K:"#ffd556",S:"#7bb8fc"};
  var ORDER = ["C","I","K","S"];
  var r = 51, circumference = 2*Math.PI*r;
  var HAS_HOVER = window.matchMedia && window.matchMedia("(hover:hover)").matches;

  var lockedKey = "total", activeKey = lockedKey, hasRenderedFirst = false;

  var LENS_DATA = {};
  ["21","210","total"].forEach(function(k){
    LENS_DATA[k] = {cards:{keys:"–",canon:"–",artefacts:"–"}, intents:{C:25,I:25,K:25,S:25}, signal:{epoch:"–",body:"No signals yet."}};
  });

  function fmtNum(n){
    if(n===undefined||n===null)return "–";
    var num=typeof n==="number"?n:(parseInt(String(n),10)||0);
    return String(num).replace(/\B(?=(\d{3})+(?!\d))/g," ");
  }
  function stopLoading(el){if(el)el.classList.remove("loading");}
  function countUp(el,target,dur){
    var num=typeof target==="number"?target:(parseInt(String(target),10)||0);
    if(!el)return; stopLoading(el);
    if(isNaN(num)){el.textContent="–";return;}
    if(dur<=0){el.textContent=fmtNum(num);return;}
    var t0=null;
    function step(ts){if(!t0)t0=ts;var p=Math.min((ts-t0)/dur,1);el.textContent=fmtNum(Math.round((1-Math.pow(1-p,3))*num));if(p<1)requestAnimationFrame(step);}
    requestAnimationFrame(step);
  }
  function fetchT(url,ms){
    if(window.AbortSignal&&typeof AbortSignal.timeout==="function")return fetch(url,{signal:AbortSignal.timeout(ms)});
    var c=new AbortController(),id=setTimeout(function(){c.abort();},ms);
    return fetch(url,{signal:c.signal}).finally(function(){clearTimeout(id);});
  }

  // ═══ DONUT ═══
  function dominant(i){var e=Object.entries(i).sort(function(a,b){return b[1]-a[1];});return{key:e[0][0],pct:e[0][1]};}
  function donutSVG(intents,uid){
    var sum=intents.C+intents.I+intents.K+intents.S;
    var s=sum===0?{C:25,I:25,K:25,S:25}:{C:(intents.C/sum)*100,I:(intents.I/sum)*100,K:(intents.K/sum)*100,S:(intents.S/sum)*100};
    var w=dominant({C:Math.round(s.C),I:Math.round(s.I),K:Math.round(s.K),S:Math.round(s.S)});
    var gid="dBg"+(uid||""),off=-90;
    var segs=ORDER.map(function(k){var p=s[k],a=(p/100)*circumference;var o={k:k,d:a.toFixed(1)+" "+(circumference-a).toFixed(1),r:off};off+=(p/100)*360;return o;});
    var ts="font-family:system-ui,-apple-system,'Segoe UI',sans-serif;font-size:20px;font-weight:800;letter-spacing:0.01em;";
    return '<svg class="donut-svg" viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg">'
      +'<defs><radialGradient id="'+gid+'" cx="50%" cy="40%" r="70%"><stop offset="0%" stop-color="#0b101b"/><stop offset="100%" stop-color="#1c2534"/></radialGradient></defs>'
      +'<circle cx="70" cy="70" r="62" fill="url(#'+gid+')"/><circle cx="70" cy="70" r="43" fill="#0f141f"/>'
      +'<circle cx="70" cy="70" r="'+r+'" fill="none" stroke="#252c3b" stroke-width="11" transform="rotate(-90 70 70)"/>'
      +segs.map(function(x){return '<circle cx="70" cy="70" r="'+r+'" fill="none" stroke="'+COLORS[x.k]+'" stroke-width="11" stroke-linecap="butt" stroke-dasharray="'+x.d+'" transform="rotate('+x.r+' 70 70)"/>';}).join("")
      +'<text x="70" y="78" text-anchor="middle" fill="'+COLORS[w.key]+'" style="'+ts+'">Ω'+w.key+' '+w.pct+'%</text></svg>';
  }
  function renderDonutCard(card){
    var wl=card.getAttribute("data-window")||"",sub=card.getAttribute("data-sub")||"";
    var i={C:Number(card.getAttribute("data-c")||0),I:Number(card.getAttribute("data-i")||0),K:Number(card.getAttribute("data-k")||0),S:Number(card.getAttribute("data-s")||0)};
    card.innerHTML='<div class="donut-top"><div class="label">'+wl+'</div><div class="sub">'+sub+'</div></div><div class="donut-mid">'+donutSVG(i,card.getAttribute("data-key"))+'</div>';
  }

  // ═══ FETCH ═══
  function fetchField(base){return fetchT(base+"/field",8000).then(function(r){if(!r.ok)throw new Error(r.status);return r.json();});}
  function loadData(){
    fetchField(API_BASE).catch(function(){return fetchField(FALLBACK_API);})
      .then(function(data){updateFromAPI(data);setActiveLens(lockedKey,{lock:false});renderMobile();})
      .catch(function(){setActiveLens("total",{lock:true});});
  }

  // ═══ API → STATE ═══
  function updateFromAPI(data){
    if(!data)return;
    var ls=data.lensStats||{},lcd=data.lastClosedEpoch||0,ce=data.currentEpoch||0;
    function gc(s,fk,fc,fa){return{keys:s?.keys??fk??0,canon:s?.canon??fc??0,artefacts:s?.artefacts??fa??0};}
    function bs(s,el){var m=s?.mas;if(m)return{epoch:el,body:m.text||m.body||m.cid||"Signal stored on-chain."};return{epoch:el,body:"No signals in this period."};}

    var tk=data.totalKeys||data.live?.totalKeys||0,tc=data.totalCanonMarkers||data.live?.totalCanonMarkers||0,ta=data.totalArtefacts||data.live?.totalArtefacts||0;
    var el21=lcd<21?"Epoch 0–"+lcd:"Epoch "+(lcd-20)+"–"+lcd;
    var el210=lcd<210?"Epoch 0–"+lcd:"Epoch "+(lcd-209)+"–"+lcd;
    var elT="Epoch 0–"+lcd;

    LENS_DATA["21"]={cards:gc(ls.last21Epochs,tk,tc,ta),intents:{C:25,I:25,K:25,S:25},signal:bs(ls.last21Epochs||{},el21)};
    LENS_DATA["210"]={cards:gc(ls.last210Epochs,tk,tc,ta),intents:{C:25,I:25,K:25,S:25},signal:bs(ls.last210Epochs||{},el210)};
    LENS_DATA["total"]={cards:gc(ls.total,tk,tc,ta),intents:{C:25,I:25,K:25,S:25},signal:bs(ls.total||{},elT)};

    if(data.intentDistribution){
      var mp={"21":data.intentDistribution.last21Epochs,"210":data.intentDistribution.last210Epochs,total:data.intentDistribution.total};
      ["21","210","total"].forEach(function(k){var id=mp[k];if(id)LENS_DATA[k].intents={C:id["ΩC"]||0,I:id["ΩI"]||0,K:id["ΩK"]||0,S:id["ΩS"]||0};});
      document.querySelectorAll(".donut-grid .donut-card").forEach(function(c){
        var k=c.getAttribute("data-key"),id=mp[k];
        if(id){c.setAttribute("data-c",id["ΩC"]||0);c.setAttribute("data-i",id["ΩI"]||0);c.setAttribute("data-k",id["ΩK"]||0);c.setAttribute("data-s",id["ΩS"]||0);renderDonutCard(c);}
      });
    }

    if(data.latestKey){
      var gl=data.latestKey.glyphLine||"",gs=Array.from(gl).filter(function(g){return g.trim();});
      var lk=document.getElementById("latestKey"),lg=document.getElementById("latestGlyphs");
      if(lk)lk.textContent="Z1N #"+data.latestKey.tokenId;
      if(lg){if(gs.length>0)lg.innerHTML=gs.map(function(g,i){return(i>0?'<span class="dot">·</span>':'')+'<span>'+g+'</span>';}).join('');else lg.textContent="–";}
    }
    var eb=document.getElementById("epochBadge");
    if(eb&&ce!==undefined){var ev=eb.querySelector(".ep-value");if(ev)ev.textContent=ce;}
  }

  // ═══ DESKTOP RENDER ═══
  var lastKey=null;
  function render(){
    var d=LENS_DATA[activeKey]||LENS_DATA.total;
    var dur=0;if(!hasRenderedFirst)dur=2000;else if(activeKey!==lastKey)dur=500;lastKey=activeKey;
    countUp(document.getElementById("vKeys"),d.cards.keys,dur);
    countUp(document.getElementById("vCanon"),d.cards.canon,dur);
    countUp(document.getElementById("vArtefacts"),d.cards.artefacts,dur);
    var fe=document.getElementById("fsEpoch"),fb=document.getElementById("fsBody");
    if(fe){var v=fe.querySelector(".ep-value");if(v)v.textContent=d.signal.epoch.replace("Epoch ","");}
    if(fb)fb.textContent=d.signal.body;
    document.querySelectorAll(".donut-grid .donut-card").forEach(function(el){el.classList.toggle("active",el.getAttribute("data-key")===activeKey);});
    hasRenderedFirst=true;
  }
  function setActiveLens(k,o){if(o&&o.lock)lockedKey=k;activeKey=k;render();}
  function wireDesktop(){
    document.querySelectorAll(".donut-grid .donut-card").forEach(function(c){
      var k=c.getAttribute("data-key")||"total";
      c.addEventListener("mouseenter",function(){setActiveLens(k,{lock:false});});
      c.addEventListener("mouseleave",function(){setActiveLens(lockedKey,{lock:false});});
      c.addEventListener("click",function(){setActiveLens(k,{lock:true});});
    });
  }

  // ═══ MOBILE RENDER ═══
  function renderMobile(){
    ["21","210","total"].forEach(function(k){
      var d=LENS_DATA[k],suf=k==="total"?"Total":k;
      var de=document.getElementById("mobDonut"+suf);if(de)de.innerHTML=donutSVG(d.intents,"m"+k);
      var ke=document.getElementById("mobKeys"+suf);if(ke)ke.textContent=fmtNum(d.cards.keys);
      var ce=document.getElementById("mobCanon"+suf);if(ce)ce.textContent=fmtNum(d.cards.canon);
      var ae=document.getElementById("mobArt"+suf);if(ae)ae.textContent=fmtNum(d.cards.artefacts);
      var se=document.getElementById("mobSigEp"+suf);if(se)se.textContent=d.signal.epoch;
      var sb=document.getElementById("mobSigBody"+suf);if(sb)sb.textContent=d.signal.body;
    });
  }

  // ═══ MOBILE CAROUSEL ═══
  (function(){
    var car=document.getElementById("mobCarousel"),trk=document.getElementById("mobTrack");
    var dots=document.getElementById("mobDots"),pb=document.getElementById("mobPrev"),nb=document.getElementById("mobNext");
    if(!car||!trk)return;
    var slides=trk.querySelectorAll(".mob-slide"),idx=0,tot=slides.length;
    for(var i=0;i<tot;i++){(function(n){
      var b=document.createElement("button");b.className="mob-dot"+(n===0?" active":"");b.type="button";
      b.addEventListener("click",function(){idx=n;snap();});dots.appendChild(b);
    })(i);}
    function snap(){
      trk.style.transition="transform 0.4s ease";
      trk.style.transform="translateX(-"+(idx*100)+"%)";
      var ds=dots.querySelectorAll(".mob-dot");for(var j=0;j<ds.length;j++)ds[j].classList.toggle("active",j===idx);
      pb.disabled=(idx===0);nb.disabled=(idx===tot-1);
    }
    pb.addEventListener("click",function(){if(idx>0){idx--;snap();}});
    nb.addEventListener("click",function(){if(idx<tot-1){idx++;snap();}});
    var down=false,sx=0,sy=0,dx=0,lock=false;
    car.addEventListener("pointerdown",function(e){if(e.button!==undefined&&e.button!==0)return;down=true;sx=e.clientX;sy=e.clientY;dx=0;lock=false;trk.style.transition="none";});
    window.addEventListener("pointermove",function(e){if(!down||lock)return;var mx=e.clientX-sx,my=e.clientY-sy;if(Math.abs(my)>Math.abs(mx)*1.2&&Math.abs(mx)<15){lock=true;snap();return;}dx=mx;trk.style.transform="translateX(calc(-"+(idx*100)+"% + "+(dx/car.clientWidth*100)+"%))"});
    function up(){if(!down)return;down=false;var th=car.clientWidth*0.18;if(dx>th&&idx>0)idx--;else if(dx<-th&&idx<tot-1)idx++;snap();}
    window.addEventListener("pointerup",up);window.addEventListener("pointercancel",up);
    car.addEventListener("dragstart",function(e){e.preventDefault();});
    snap();
  })();

  // ═══ SPOTLIGHT ═══
  (function(){var f=document.getElementById("latestFrame");if(!f)return;f.addEventListener("mousemove",function(e){var r=f.getBoundingClientRect();f.style.setProperty("--mx",((e.clientX-r.left)/r.width*100).toFixed(2)+"%");f.style.setProperty("--my",((e.clientY-r.top)/r.height*100).toFixed(2)+"%");},{passive:true});})();

  // ═══ INIT ═══
  document.querySelectorAll(".donut-grid .donut-card").forEach(renderDonutCard);
  if(HAS_HOVER)wireDesktop();
  renderMobile();
  loadData();
  setInterval(loadData,30000);
})();

// Epoch tooltip (desktop)
(function(){var t=document.getElementById("fsEpoch"),p=document.getElementById("epochTooltip");if(!t||!p)return;t.addEventListener("mouseenter",function(){var r=t.getBoundingClientRect();p.style.left=r.left+"px";p.style.top=(r.bottom+8)+"px";p.style.display="block";});t.addEventListener("mouseleave",function(){p.style.display="none";});})();

// Hamburger
(function(){var b=document.getElementById("hamburger"),n=document.getElementById("navLinks");if(b&&n){b.addEventListener("click",function(){b.classList.toggle("open");n.classList.toggle("open");});n.addEventListener("click",function(e){if(e.target.tagName==="A"){b.classList.remove("open");n.classList.remove("open");}});}})();

// Mobile stat tooltips (tap to show)
(function(){
  document.querySelectorAll(".ms-stat-label[data-tip]").forEach(function(el){
    var tip=document.createElement("span");
    tip.className="ms-stat-tip";
    tip.textContent=el.getAttribute("data-tip");
    el.appendChild(tip);
    el.addEventListener("click",function(e){
      e.stopPropagation();
      document.querySelectorAll(".ms-stat-label.show-tip").forEach(function(o){if(o!==el)o.classList.remove("show-tip");});
      el.classList.toggle("show-tip");
    });
  });
  document.addEventListener("click",function(){document.querySelectorAll(".ms-stat-label.show-tip").forEach(function(o){o.classList.remove("show-tip");});});
})();
</script>
<script src="js/gas-banner.js"></script>
</body>
</html>