<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Z1N Protocol – Live Stats</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex,nofollow" />

  <style>
    :root{
      --bg:#050812;
      --card-bg:#020617;
      --text-main:#ffffff;
      --text-soft:#8f9ab5;
      --accent:#66d69a;
      --accent-soft:#3a9f63;
      --card-border:rgba(148,163,184,0.25);

      --C:#4CAF50;
      --I:#F44336;
      --K:#FFEB3B;
      --S:#2196F3;
    }

    *{ box-sizing:border-box; margin:0; padding:0; }

    html{
      scrollbar-gutter: stable;
      overflow-y: scroll;
      scroll-behavior: smooth;
    }

    body{
      background:var(--bg);
      color:var(--text-main);
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
    }

    a{ color:inherit; text-decoration:none; }
    a:hover{ opacity:0.9; }

    /* HEADER (shared) */
    header{
      height:72px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-bottom:1px solid rgba(255,255,255,0.05);
      margin-bottom:20px;
    }

    .nav-inner{
      width:100%;
      max-width:1200px;
      margin:0 auto;
      padding:0 24px;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }

    .logo-wrap{ display:flex; align-items:center; gap:8px; }

    .logo-link{ display:inline-flex; align-items:center; gap:8px; }

    .logo-dot{
      width:24px; height:24px; border-radius:999px;
      border:1px solid rgba(255,255,255,0.35);
      display:flex; align-items:center; justify-content:center;
      font-size:14px; line-height:1;
    }

    .logo-text{
      font-size:11px;
      letter-spacing:0.18em;
      text-transform:uppercase;
      opacity:0.7;
    }

    .nav-links{
      display:flex;
      gap:22px;
      font-size:13px;
      opacity:0.85;
    }

    .nav-links a{ position:relative; }
    .nav-links a.active{ color:var(--accent); }

    .nav-links a.active::after{
      content:"";
      position:absolute;
      left:0;
      bottom:-4px;
      width:100%;
      height:2px;
      border-radius:999px;
      background:linear-gradient(to right,var(--accent),var(--accent-soft));
    }

    @media(max-width:900px){
      .nav-inner{ padding:0 16px; }
      .nav-links{
        font-size:12px;
        gap:14px;
        flex-wrap:wrap;
        justify-content:flex-end;
      }
    }

    /* PAGE */
    .page{
      max-width:1200px;
      margin:0 auto;
      padding:40px 24px 72px;
    }
    @media(max-width:900px){
      .page{ padding:32px 18px 56px; }
    }

    h1{
      font-size:40px;
      margin:0 0 10px 0;
      letter-spacing:-0.02em;
    }

    .lead{
      font-size:17px;
      opacity:0.85;
      line-height:1.65;
      margin-bottom:8px;
      max-width:900px;
    }

    .lead-small{
      font-size:14px;
      opacity:0.7;
      line-height:1.65;
      margin-top:4px;
      margin-bottom:32px; /* extra lucht */
      max-width:900px;
    }

    /* ====== LATEST GLYPH BAR (index vibe) ====== */
    .glyph-strip{
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.18);
      background: radial-gradient(circle at top, rgba(102,214,154,0.08), rgba(2,6,23,0.0) 62%);
      overflow:hidden;
      margin: 10px 0 28px 0;
    }

    .glyph-strip-inner{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:14px 16px;
    }

    .glyph-left{
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width: 220px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      width:max-content;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.30);
      font-size:11px;
      letter-spacing:0.16em;
      text-transform:uppercase;
      color: rgba(255,255,255,0.78);
    }

    .glyph-meta{
      font-size:13px;
      color: var(--text-soft);
      line-height:1.55;
    }

    .glyph-right{
      display:flex;
      align-items:center;
      gap:14px;
      justify-content:flex-end;
      flex:1;
      min-width: 0;
    }

    .glyph-id{
      font-size:22px;
      font-weight:700;
      letter-spacing:-0.02em;
      white-space:nowrap;
    }

    .glyph-line{
      font-size:22px;
      letter-spacing:0.02em;
      opacity:0.88;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 640px;
    }

    .glyph-line .dot{
      color:#6b7280;
      opacity:1;
      padding:0 4px;
    }

    @media(max-width:900px){
      .glyph-strip-inner{
        flex-direction:column;
        align-items:flex-start;
      }
      .glyph-right{
        width:100%;
        justify-content:flex-start;
        flex-wrap:wrap;
      }
      .glyph-line{ max-width: 100%; }
    }

    /* ====== DONUT DASHBOARD ====== */
    .dash-title{
      font-size:18px;
      letter-spacing:-0.01em;
      margin: 6px 0 10px;
    }

    .dash-sub{
      font-size:13px;
      color: var(--text-soft);
      line-height:1.6;
      margin-bottom:16px;
      max-width:900px;
    }

    /* Desktop grid */
    .donut-grid{
      display:grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap:16px;
    }

    .donut-card{
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 18px;
      padding: 14px 14px 16px;
      position:relative;
      overflow:hidden;
      transition: transform 220ms ease, box-shadow 220ms ease, border-color 220ms ease;
    }

    .donut-card::before{
      content:"";
      position:absolute;
      inset:-1px;
      pointer-events:none;
      border-radius:18px;
      background: radial-gradient(circle at top, rgba(102,214,154,0.10), rgba(2,6,23,0) 62%);
      opacity:0.85;
    }

    .donut-card > *{ position:relative; }

    .donut-top{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }

    .donut-top .label{
      font-size:11px;
      letter-spacing:0.16em;
      text-transform:uppercase;
      color: rgba(255,255,255,0.75);
      opacity:0.9;
    }

    .donut-top .epoch{
      font-size:12px;
      color: var(--text-soft);
      white-space:nowrap;
    }

    .donut-mid{
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 4px 0 10px;
    }

    .donut-svg{
      width: 150px;
      height: 150px;
      display:block;
    }

    .donut-center-title{
      font-size:12px;
      fill:#d5d9e8;
      opacity:0.95;
    }
    .donut-center-sub{
      font-size:11px;
      fill: var(--text-soft);
    }
    .donut-center-win{
      font-size:14px;
      font-weight:700;
      fill:#ffffff;
    }

    .legend{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
      margin-top: 8px;
      font-size:12px;
      color: rgba(255,255,255,0.80);
      opacity:0.9;
    }

    .lg{
      display:inline-flex;
      align-items:center;
      gap:6px;
      border: 1px solid rgba(148,163,184,0.22);
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.02);
    }

    .sw{
      width:10px;
      height:10px;
      border-radius:999px;
      display:inline-block;
    }

    .donut-card:hover{
      transform: translateY(-2px);
      border-color: rgba(102,214,154,0.45);
      box-shadow:
        0 6px 18px rgba(0,0,0,0.35),
        0 0 0 1px rgba(102,214,154,0.14),
        0 0 18px rgba(102,214,154,0.10);
    }

    /* Mobile swipe version */
    .donut-swipe{
      display:none;
      margin-top: 10px;
    }

    .swipe-track{
      display:flex;
      gap:14px;
      overflow-x:auto;
      padding: 2px 2px 12px;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
    }

    .swipe-track::-webkit-scrollbar{ height:10px; }
    .swipe-track::-webkit-scrollbar-thumb{
      background: rgba(148,163,184,0.25);
      border-radius:999px;
    }
    .swipe-track::-webkit-scrollbar-track{
      background: rgba(255,255,255,0.03);
      border-radius:999px;
    }

    .donut-card.swipe{
      flex: 0 0 86%;
      scroll-snap-align: start;
    }

    .swipe-hint{
      font-size:12px;
      color: var(--text-soft);
      margin-top: 8px;
      opacity:0.9;
    }

    @media(max-width:900px){
      .donut-grid{ display:none; }
      .donut-swipe{ display:block; }
    }

    /* ====== SOFTER STATS (NOT TOO ANALYTICS) ====== */
    .soft-grid{
      margin-top: 18px;
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:16px;
    }

    .soft-card{
      background: var(--card-bg);
      border-radius:16px;
      border:1px solid var(--card-border);
      padding:14px 14px 16px;
      font-size:13px;
      transition: transform 220ms ease, border-color 220ms ease, box-shadow 220ms ease;
    }

    .soft-label{
      font-size:11px;
      letter-spacing:0.16em;
      text-transform:uppercase;
      opacity:0.55;
      margin-bottom:6px;
    }

    .soft-value{
      font-size:18px;
      font-weight:600;
      margin-bottom:4px;
    }

    .soft-sub{
      font-size:12px;
      opacity:0.75;
      line-height:1.55;
    }

    .soft-card:hover{
      transform: translateY(-2px);
      border-color: rgba(102,214,154,0.35);
      box-shadow: 0 6px 18px rgba(0,0,0,0.30);
    }

    @media(max-width:900px){
      .soft-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    }
    @media(max-width:600px){
      .soft-grid{ grid-template-columns: 1fr; }
    }

    /* FOOTER */
    footer{
      border-top:1px solid rgba(255,255,255,0.05);
      padding:20px;
      font-size:12px;
      text-align:center;
      opacity:0.85;
    }

    footer .tagline{
      margin-bottom:6px;
      font-size:13px;
    }

    footer .links{
      display:flex;
      justify-content:center;
      gap:18px;
      font-size:13px;
    }

    @media (prefers-reduced-motion: reduce){
      *{ scroll-behavior: auto !important; }
      .donut-card, .soft-card{ transition:none; }
    }
  </style>
</head>

<body>
<header>
  <div class="nav-inner">
    <div class="logo-wrap">
      <a href="index.html" class="logo-link" aria-label="Z1N Protocol home">
        <div class="logo-dot">Ω</div>
        <div class="logo-text">Z1N PROTOCOL</div>
      </a>
    </div>

    <nav class="nav-links">
      <a href="about.html">About</a>
      <a href="live-stats.html" class="active">Live Stats</a>
      <a href="artefacts.html">Artefacts</a>
      <a href="nbi-artefacts.html">4 NBIs</a>
      <a href="mint-key.html">Mint your Key</a>
    </nav>
  </div>
</header>

<main class="page">
  <h1>Live stats of the field</h1>

  <p class="lead">
    This page is not a spreadsheet. It is a mirror: signal → intent → presence.
  </p>

  <p class="lead-small">
    We start with signal composition (intent mix). The rest sits beneath it — softly.
  </p>

  <!-- Latest glyph minted (visual bar) -->
  <section class="glyph-strip" aria-label="Latest glyph minted">
    <div class="glyph-strip-inner">
      <div class="glyph-left">
        <div class="pill">Latest glyph minted</div>
        <div class="glyph-meta">A small mark of “who arrived” most recently (placeholder).</div>
      </div>

      <div class="glyph-right">
        <div class="glyph-id">Z1N #777</div>
        <div class="glyph-line" aria-label="Glyph line">
          ∞ <span class="dot">·</span> π <span class="dot">·</span> △ <span class="dot">·</span> ⊗ <span class="dot">·</span> ◇ <span class="dot">·</span> ○
        </div>
      </div>
    </div>
  </section>

  <h2 class="dash-title">Dashboard with intent mix</h2>
  <p class="dash-sub">
    Same field, different lens: <span style="color:var(--accent)">Current</span>, last 21, last 210, total.
    Each donut shows “how the field speaks” in that window.
  </p>

  <!-- Desktop grid donuts -->
  <section class="donut-grid" aria-label="Intent mix donuts (desktop)">
    <article class="donut-card" data-window="Current epoch" data-sub="epoch now"
      data-c="23" data-i="18" data-k="39" data-s="20"></article>

    <article class="donut-card" data-window="21 epochs" data-sub="short lens"
      data-c="15" data-i="22" data-k="44" data-s="19"></article>

    <article class="donut-card" data-window="210 epochs" data-sub="pattern lens"
      data-c="12" data-i="19" data-k="47" data-s="22"></article>

    <article class="donut-card" data-window="Total epochs" data-sub="field memory"
      data-c="7" data-i="14" data-k="51" data-s="28"></article>
  </section>

  <!-- Mobile swipe donuts -->
  <section class="donut-swipe" aria-label="Intent mix donuts (mobile swipe)">
    <div class="swipe-track" id="swipeTrack">
      <article class="donut-card swipe" data-window="Current epoch" data-sub="epoch now"
        data-c="23" data-i="18" data-k="39" data-s="20"></article>

      <article class="donut-card swipe" data-window="21 epochs" data-sub="short lens"
        data-c="15" data-i="22" data-k="44" data-s="19"></article>

      <article class="donut-card swipe" data-window="210 epochs" data-sub="pattern lens"
        data-c="12" data-i="19" data-k="47" data-s="22"></article>

      <article class="donut-card swipe" data-window="Total epochs" data-sub="field memory"
        data-c="7" data-i="14" data-k="51" data-s="28"></article>
    </div>
    <div class="swipe-hint">Swipe → to change lens</div>
  </section>

  <!-- Softer stats under the donuts -->
  <section class="soft-grid" aria-label="Soft field stats">
    <div class="soft-card">
      <div class="soft-label">Keys awakened</div>
      <div class="soft-value">7 842</div>
      <div class="soft-sub">How many identities have entered the field so far (placeholder).</div>
    </div>

    <div class="soft-card">
      <div class="soft-label">PoG signals</div>
      <div class="soft-value">14 220</div>
      <div class="soft-sub">Total signals the field has received across epochs (placeholder).</div>
    </div>

    <div class="soft-card">
      <div class="soft-label">Most attested intent</div>
      <div class="soft-value">ΩS</div>
      <div class="soft-sub">What the field currently agrees with most (placeholder).</div>
    </div>
  </section>

</main>

<footer>
  <div class="tagline">Your presence is real · The Field remembers</div>
  <div class="links">
    <a href="https://github.com/z1nprotocol" target="_blank" rel="noreferrer">GitHub</a>
    <a href="https://x.com/z1n_AI" target="_blank" rel="noreferrer">X</a>
  </div>
</footer>

<script>
  (function () {
    const COLORS = { C: "#4CAF50", I: "#F44336", K: "#FFEB3B", S: "#2196F3" };
    const ORDER = ["C","I","K","S"];
    const r = 51;
    const circumference = 2 * Math.PI * r;

    function dominant(intents){
      const entries = Object.entries(intents).sort((a,b) => b[1]-a[1]);
      const [key, pct] = entries[0];
      return { key, pct, color: COLORS[key] };
    }

    function buildDonutSVG(intents, titleTop, titleBottom){
      // Normalize to sum=100 (basic guard)
      const sum = intents.C + intents.I + intents.K + intents.S;
      const safe = sum === 0 ? {C:25,I:25,K:25,S:25} : {
        C: (intents.C / sum) * 100,
        I: (intents.I / sum) * 100,
        K: (intents.K / sum) * 100,
        S: (intents.S / sum) * 100,
      };

      const win = dominant({
        C: Math.round(safe.C),
        I: Math.round(safe.I),
        K: Math.round(safe.K),
        S: Math.round(safe.S),
      });

      let offsetDeg = -90; // start at top
      const segments = ORDER.map((k) => {
        const pct = safe[k];
        const arc = (pct / 100) * circumference;
        const dasharray = `${arc.toFixed(1)} ${(circumference - arc).toFixed(1)}`;
        const seg = {
          key: k,
          pct: pct,
          dasharray,
          rotate: offsetDeg
        };
        offsetDeg += (pct / 100) * 360;
        return seg;
      });

      return `
        <svg class="donut-svg" viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg" aria-label="Intent donut">
          <defs>
            <radialGradient id="donutBg" cx="50%" cy="40%" r="70%">
              <stop offset="0%" stop-color="#0b101b"/>
              <stop offset="100%" stop-color="#1c2534"/>
            </radialGradient>
          </defs>

          <!-- background plate -->
          <circle cx="70" cy="70" r="62" fill="url(#donutBg)"></circle>
          <circle cx="70" cy="70" r="43" fill="#0f141f"></circle>

          <!-- base track -->
          <circle cx="70" cy="70" r="${r}"
                  fill="none" stroke="#252c3b" stroke-width="11"
                  transform="rotate(-90 70 70)"></circle>

          <!-- segments -->
          ${segments.map(s => `
            <circle cx="70" cy="70" r="${r}"
                    fill="none" stroke="${COLORS[s.key]}" stroke-width="11"
                    stroke-linecap="butt"
                    stroke-dasharray="${s.dasharray}"
                    transform="rotate(${s.rotate} 70 70)"></circle>
          `).join("")}

          <!-- center text -->
          <text x="70" y="61" text-anchor="middle" class="donut-center-title">${titleTop}</text>
          <text x="70" y="77" text-anchor="middle" class="donut-center-sub">${titleBottom}</text>

          <text x="70" y="99" text-anchor="middle" class="donut-center-win">
            <tspan fill="${win.color}">Ω${win.key}</tspan>
            <tspan fill="#ffffff"> ${win.pct}%</tspan>
          </text>
        </svg>
      `;
    }

    function renderCard(card){
      const windowLabel = card.getAttribute("data-window") || "Window";
      const sub = card.getAttribute("data-sub") || "";
      const intents = {
        C: Number(card.getAttribute("data-c") || 0),
        I: Number(card.getAttribute("data-i") || 0),
        K: Number(card.getAttribute("data-k") || 0),
        S: Number(card.getAttribute("data-s") || 0),
      };

      card.innerHTML = `
        <div class="donut-top">
          <div class="label">${windowLabel}</div>
          <div class="epoch">${sub}</div>
        </div>

        <div class="donut-mid">
          ${buildDonutSVG(intents, windowLabel.includes("21") ? "Last 21" :
                                  windowLabel.includes("210") ? "Last 210" :
                                  windowLabel.includes("Total") ? "Total" : "Current",
                                  "Intent mix")}
        </div>

        <div class="legend" aria-label="Legend">
          <span class="lg"><span class="sw" style="background:var(--C)"></span>ΩC</span>
          <span class="lg"><span class="sw" style="background:var(--I)"></span>ΩI</span>
          <span class="lg"><span class="sw" style="background:var(--K)"></span>ΩK</span>
          <span class="lg"><span class="sw" style="background:var(--S)"></span>ΩS</span>
        </div>
      `;
    }

    document.querySelectorAll(".donut-card").forEach(renderCard);
  })();
</script>

</body>
</html>
